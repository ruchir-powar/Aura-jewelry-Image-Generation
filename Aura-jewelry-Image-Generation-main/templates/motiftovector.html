{% extends "base.html" %}
{% block title %}Motif → Vector · JewelGen AI{% endblock %}

{% block styles %}
<style>
  /* Page shell */
  .vx-wrap { max-width: 1100px; margin: 28px auto 40px; padding: 0 16px; }
  .vx-head { display:flex; align-items:center; gap:12px; margin-bottom:16px; }
  .vx-title { font-size: 28px; line-height:1.2; letter-spacing:.3px; color:#111; }
  .vx-tag { display:inline-block; font-size:12px; padding:4px 10px; border-radius:999px;
            background:#fff5cc; color:#6b5300; border:1px solid #ffe28a; }

  /* Grid */
  .vx-grid { display:grid; grid-template-columns: 1fr 1fr; gap:18px; }
  @media (max-width: 900px) { .vx-grid { grid-template-columns: 1fr; } }

  /* Panels (cards) */
  .vx-card { background:#fff; border:1px solid #e7e7e7; border-radius:16px; padding:16px 16px 14px;
             box-shadow: 0 2px 10px rgba(0,0,0,.03); }
  .vx-card h3 { margin:0 0 10px; font-size:18px; color:#222; }
  .vx-subtle { color:#777; font-size:13px; }

  /* Dropzone */
  [data-dropzone]{
    border:1.5px dashed #c9c9c9; border-radius:14px; padding:22px;
    background:linear-gradient(180deg,#fafafa 0%, #f7f7f7 100%);
    color:#555; text-align:center; cursor:pointer;
    transition: border-color .12s ease, background .12s ease, box-shadow .12s ease;
    min-height: 180px; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:8px;
  }
  [data-dropzone]:hover { border-color:#b8b8b8; box-shadow:0 4px 16px rgba(0,0,0,.05); }
  [data-dropzone].dragover{ border-color:#ffd54a; background:#fff8db; }
  .vx-hint{ font-size:12px; color:#888; }
  .vx-meta{ font-size:13px; color:#666; }

  /* Preview */
  .vx-preview{
    display:flex; align-items:center; justify-content:center;
    background:#fbfbfb; border:1px solid #eee; border-radius:12px; min-height:240px;
    overflow:hidden;
  }
  .vx-preview img{ max-width:100%; max-height:380px; display:block; }

  /* Buttons */
  .vx-btnbar{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
  .vx-btn{ padding:10px 14px; border-radius:12px; border:1px solid #d9d9d9; background:#fff; color:#222; cursor:pointer; }
  .vx-btn:hover { box-shadow:0 2px 8px rgba(0,0,0,.05); }
  .vx-btn.primary{ border-color:#ffd54a; background:#fffbe6; }
  .vx-btn:disabled{ opacity:.6; cursor:not-allowed; }

  /* Output area */
  .vx-code{
    background:#fbfbfb; border:1px solid #eee; border-radius:12px; padding:12px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    color:#333; font-size:13px; white-space: pre-wrap; user-select:text; min-height:200px;
  }
</style>
{% endblock %}

{% block content %}
<div class="vx-wrap">
  <div class="vx-head">
    <h1 class="vx-title">Motif → Vector</h1>
    <span class="vx-tag">Preview mode</span>
  </div>

  <div class="vx-grid">
    <!-- Left: Upload & Preview -->
    <section class="vx-card" aria-labelledby="vx-upload">
      <h3 id="vx-upload">Upload Motif (PNG/JPG/SVG)</h3>
      <p class="vx-subtle" style="margin-top:-4px;">Best results with a clear motif on a plain/transparent background.</p>

      <div data-dropzone id="motif-dropzone" tabindex="0" role="button" aria-label="Upload motif by clicking or dropping">
        <div><strong>Drop image here</strong> or click to select</div>
        <div class="vx-hint">PNG • JPG • WebP • SVG</div>
        <div class="vx-meta" id="file-meta">No file selected</div>
        <input type="file" id="motif-input" accept=".png,.jpg,.jpeg,.webp,.svg" style="display:none" />
      </div>

      <div class="vx-preview" id="motif-preview" aria-live="polite" aria-atomic="true" style="margin-top:12px;">
        <span class="vx-subtle">Selected image preview will appear here</span>
      </div>

      <div class="vx-btnbar">
        <button class="vx-btn primary" id="btn-vectorize" title="(Disabled in preview mode)">Vectorize</button>
        <button class="vx-btn" id="btn-clear">Clear</button>
      </div>
    </section>

    <!-- Right: Output -->
    <section class="vx-card" aria-labelledby="vx-output">
<h3 id="vx-output">Vector Output</h3>
<div id="svg-live" class="vx-preview" style="margin-bottom:12px; min-height:220px; background:#fbfbfb; border:1px solid #eee; border-radius:12px; display:flex; align-items:center; justify-content:center;">
  <span class="vx-subtle">SVG preview will appear here</span>
</div>
<div class="vx-code" id="vector-output">SVG source will appear here…</div>

      <div class="vx-btnbar">
        <button class="vx-btn" id="btn-download-svg" disabled>Download SVG</button>
        <button class="vx-btn" id="btn-copy-svg" disabled>Copy SVG</button>
      </div>
    </section>
  </div>
</div>
{% endblock %}
{% block scripts %}
  <!-- keep JS exactly as you have it -->
  <script type="module" src="/static/js/pages/vector.js"></script>
{% endblock %}
